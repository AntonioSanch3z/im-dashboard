
<br>
<div id="confScheduling">
  <div class="form-group">
      <h5>EGI Automtic Cloud Provider selection:</h5>
  </div>

  
  <script src="{{ url_for('static', filename='chart/Chart.min.js') }}"></script>
  <script src="{{ url_for('static', filename='chart/utils.js') }}"></script>

  <script>

   function searchImages() {
        $(".searchBtn").attr("disabled", true);
        $(".searchBtn").html( `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Searching...` );
        $('#autoSelectedImage').empty();
        $('#autoSelectedImage').append("<option value=''>Loading Images ...</option>");
        var vo = $("#selectedVO").val();
        var distribution = $("#distribution").val();
        var version = $("#version").val();
        var app = $("#app").val();
        $.ajax({
            method: "GET",
            url: "{{ url_for('home') }}images/appdbis?vo=" + vo + "&distribution=" + distribution + "&version=" + version + "&app=" + app,
            success : function(text)
            {
                $('#autoSelectedImage').empty();
                $('#autoSelectedImage').append(text);
                $('#egiAutoImages').show();
                $(".searchBtn").html('Search');
                $(".searchBtn").attr("disabled", false);
            },
            error : function(error)
            {
                $(".searchBtn").html('Search');
                $(".searchBtn").attr("disabled", false);
                alert(error.responseText);
            }
        });
   }

   function loadVOs() {
       $('#selectedVO').empty();
       $('#selectedVO').append("<option value=''>Loading VOs ...</option>");
       $.ajax({
           method: "GET",
           url: "{{ url_for('home') }}vos",
           success : function(text)
           {
               $('#selectedVO').empty();
               $('#selectedVO').append("<option value=''> - Select one VO - </option>");
               $('#selectedVO').append(text);
           }
       });
   }
   </script>


  <div id="manschedConf" class="form-group">
      <p></p>

      <div class="form-row">
       <div class="form-group col-md-12">

          <div class="form-group">
            <label>Select VO:</label>
            <select class="js-example-basic-single js-states form-control" id="selectedVO" name="extra_opts.selectedVO">
                <option name="extra_opts.selectedVO" value="">-</option>
            </select>
          </div>
          <script>
            loadVOs();
          </script>
          <div class="form-group">
            <label>O.S. Distribution:</label>
            <input type="text" class="form-control" id="distribution" name="extra_opts.distribution">
          </div>

          <div class="form-group">
            <label>O.S. Version:</label>
            <input type="text" class="form-control" id="version" name="extra_opts.version">
          </div>

          <div class="form-group">
            <label>Image name:</label>
            <input type="text" class="form-control" id="app" name="extra_opts.app">
          </div>

          <button type="button" class="btn btn-success searchBtn" onclick="searchImages()">Search</button>

           <div class="form-group" id="egiAutoImages" style="display: none;">
              <label>
                Select Image from site.
                Sites are ordered by the amount of free VMs available.
              </label>
              <select class="js-example-basic-single js-states form-control" id="autoSelectedImage" name="extra_opts.selectedImage" onchange="activateSubmit()">
                  <option name="selectedImage" value="">-</option>
              </select>
            </div>
       </div>
      </div>


  </div>
  <br>

</div>
